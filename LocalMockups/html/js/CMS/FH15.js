define(["jquery","jquery-ui","jquery.mmenu","owl-carousel","velocity","jquery-menu-aim"],function(a){function d(){$promo=a("#desktopPromo #promo"),$promoMore=a("#desktopPromo #promo .more"),$promo.stop(),$promoMore.stop(),$promoMore.slideToggle(400,function(){$promoMore.hasClass("open")?a("#desktopPromo div.promo .summary .fh-icon-triangle-down").slideUp(150,function(){a("#desktopPromo div.promo .summary .fh-icon-triangle-down").removeClass("fh-icon-triangle-down").addClass("fh-icon-triangle-up").slideDown(function(){a("#desktopPromo div.promo .exit i").fadeTo(250,1)})}):$promoMore.hasClass("open")||a("#desktopPromo div.promo .summary .fh-icon-triangle-up").slideUp(150,function(){a("#desktopPromo div.promo .summary .fh-icon-triangle-up").removeClass("fh-icon-triangle-up").addClass("fh-icon-triangle-down").slideDown(),a("#desktopPromo div.promo .exit i").css("visibility: hidden"),a("#desktopPromo div.promo .exit i").fadeTo(0,0)})}).toggleClass("open"),$promo.toggleClass("open")}function e(){$promoMobile=a("#mobilePromo #promo"),$promoMobileMore=a("#mobilePromo #promo .more"),$promoMobile.stop(),$promoMobileMore.stop(),$promoMobileMore.slideToggle(400,function(){$promoMobileMore.hasClass("open")?a("#mobilePromo div.promo .summary .fh-icon-triangle-down").slideUp(150,function(){a("#mobilePromo div.promo .summary .fh-icon-triangle-down").removeClass("fh-icon-triangle-down").addClass("fh-icon-triangle-up").slideDown(function(){a("#mobilePromo div.promo .exit i").fadeTo(250,1)})}):$promoMobileMore.hasClass("open")||a("#mobilePromo div.promo .summary .fh-icon-triangle-up").slideUp(150,function(){a("#mobilePromo div.promo .summary .fh-icon-triangle-up").removeClass("fh-icon-triangle-up").addClass("fh-icon-triangle-down").slideDown(),a("#mobilePromo div.promo .exit i").css("visibility: hidden"),a("#mobilePromo div.promo .exit i").fadeTo(0,0)})}).toggleClass("open"),$promoMobile.toggleClass("open")}!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var b=a(document),c=a(window);b.ready(function(){function w(b){var c=a(b);c.children(".Panel");c.children("a").addClass("hover"),c.addClass("hover")}function x(b){var c=a(b);c.children(".Panel");c.find("a.hover").removeClass("hover"),c.removeClass("hover")}a("html").hasClass("ie8");var f={resize:!1,scroll:!1};c.resize(function(){f.resize=!0}),c.scroll(function(){f.scroll=!0}),function b(){if(requestAnimationFrame(b),f.resize){if(a("#pageNav").hasClass("open"))if(c.width()>960)a("#pageNav").removeClass("open").css({height:"initial"}),a("body, html").css("overflow","initial");else{var d=a(window).innerHeight()+1,e=a("body").scrollTop();a("#pageNav").css({height:d,top:e})}f.resize=!1}f.scroll&&(f.scroll=!1)}(),a(".fatheadSearch form").submit(function(b){var c=a(this).find("#fhSearch").val();return!(c.length<=0)}),a("#backToTop").removeAttr("hidden"),a("#backToTop").click(function(){a("html, body").animate({scrollTop:0},"slow")}),$promoExit=a("#desktopPromo div.promo .summary, #desktopPromo div.promo .exit i.fh-icon-x"),$promoExit.on("click",function(a){d()}),$mobilePromoExit=a("#mobilePromo div.promo .summary, #mobilePromo div.promo .exit i.fh-icon-x"),$mobilePromoExit.on("click",function(a){e()});var g=a("#accountOriginal").html();a("#accountMigrate").html(g),a("#rightLinksOriginal").clone().removeAttr("id").appendTo("#rightLinksMigrate").addClass("accountContainer");var h=[a("#other-main-nav-links").clone(),a("#account-mobile-area").clone(),a("#help-section-mobile")],i='<strong class="fullWidth heading"><i class="fh-icon-cart"></i> Shop Fathead</strong><i class="fh-icon-x exitPanel" id="exitPanel"></i>',j=a("#categories").clone().append(h).prepend(i);a("#mobile-nav-container").append(j);var k=a("#mobile-nav-container"),l=k.find("[data-href]"),m=a(".cart").find("[data-href]"),n=a("#hamburger-menu").find("[data-href]");k.attr("id","mobile-nav").addClass("mobile-nav offCanvas"),a("#mobile-header").css("display","block"),l.each(function(){var b=a(this);b.attr("href");b.attr("href",b.data("href"))}),m.each(function(){var b=a(this);b.attr("href");b.attr("href",b.data("href"))}),n.each(function(){var b=a(this);b.attr("href");b.attr("href",b.data("href"))}),k.mmenu({offCanvas:{zposition:"front"}});var o=a("#mobile-nav").data("mmenu");a("#mobile-nav #exitPanel").click(function(){o.close()});var p=a("#cartSummary").clone();p.attr("id","mobile-cart"),p.mmenu({offCanvas:{position:"right"}});var q=a("#mobile-cart").data("mmenu");a(".cartSummary #exitPanel").click(function(){q.close()}),a("a[href='#pageNav']").click(function(b){b.preventDefault();var c=a(window).innerHeight()+1,d=a("body").scrollTop();a("#pageNav").addClass("open").css({height:c,top:d}),a("body, html").css("overflow","hidden")}),a("#exitPageNav").click(function(){a("#pageNav").removeClass("open").css({height:"initial"}),a("body, html").css("overflow","initial")}),a("#frontPageCarousel").owlCarousel({autoHeight:!1,autoPlay:7e3,itemsScaleUp:!0,lazyEffect:"fade",lazyFollow:!0,lazyLoad:!0,mouseDrag:!1,navigation:!0,navigationText:["&lsaquo;","&rsaquo;"],pagination:!0,paginationNumbers:!1,paginationSpeed:800,responsive:!0,responsiveBaseWidth:window,responsiveRefreshRate:10,singleItem:!0,slideSpeed:800,stopOnHover:!0,touchDrag:!0,addClassActive:!0,afterInit:function(){a(".frontPageCarousel .slide").css("display","block")}}),a("#frontPageCarouselMobile").owlCarousel({autoHeight:!1,autoPlay:7e3,itemsScaleUp:!0,lazyEffect:"fade",lazyFollow:!0,lazyLoad:!0,mouseDrag:!1,navigation:!0,navigationText:["&lsaquo;","&rsaquo;"],pagination:!0,paginationNumbers:!1,paginationSpeed:800,responsive:!0,responsiveBaseWidth:window,responsiveRefreshRate:10,singleItem:!0,slideSpeed:800,stopOnHover:!0,touchDrag:!0,addClassActive:!0,afterInit:function(){a("#frontPageCarouselMobile .slide").css("display","block")}}),a("#b2bCarousel").owlCarousel({autoHeight:!0,autoPlay:!1,itemsScaleUp:!0,lazyEffect:"fade",lazyFollow:!0,lazyLoad:!0,mouseDrag:!1,navigation:!0,navigationText:["&lsaquo;","&rsaquo;"],pagination:!0,paginationNumbers:!1,paginationSpeed:800,responsive:!0,responsiveBaseWidth:window,responsiveRefreshRate:10,singleItem:!0,slideSpeed:800,touchDrag:!0,addClassActive:!0,afterInit:function(){a(".b2bCarousel .slide").css("display","block")}}),a("#b2bCarouselMobile").owlCarousel({autoHeight:!0,autoPlay:!1,itemsScaleUp:!0,lazyEffect:"fade",lazyFollow:!0,lazyLoad:!0,mouseDraggable:!1,navigation:!0,navigationText:["&lsaquo;","&rsaquo;"],pagination:!0,paginationNumbers:!1,paginationSpeed:800,responsive:!0,responsiveBaseWidth:window,responsiveRefreshRate:10,singleItem:!0,slideSpeed:800,touchDrag:!0,addClassActive:!0,afterInit:function(){a(".b2bCarouselMobile .slide").css("display","block")}}),a("#frontPageFeature").owlCarousel({autoHeight:!1,autoPlay:!1,itemsDesktop:[1599,4],itemsDesktopSmall:[1023,3],itemsMobile:[767,1],itemsTablet:[959,2],lazyEffect:"fade",lazyFollow:!0,lazyLoad:!0,navigation:!0,navigationText:["&lsaquo;","&rsaquo;"],pagination:!1,paginationSpeed:800,responsive:!0,responsiveBaseWidth:window,responsiveRefreshRate:10,rewindNav:!1,slideSpeed:250,touchDrag:!0,beforeInit:function(){a("#frontPageFeature .widget").removeClass("pure-u-1-1 pure-u-md-1-2 pure-u-961-1-4 pure-u-lg-1-4 pure-u-xl-1-5"),a("#frontPageFeature").removeClass("pure-g")},addClassActive:!0}),a("#studioFCarousel").owlCarousel({autoHeight:!1,autoPlay:7e3,itemsScaleUp:!0,lazyEffect:"fade",lazyFollow:!0,lazyLoad:!0,mouseDrag:!1,navigation:!0,navigationText:["&lsaquo;","&rsaquo;"],pagination:!1,paginationNumbers:!1,responsive:!0,responsiveBaseWidth:window,responsiveRefreshRate:10,singleItem:!0,slideSpeed:800,stopOnHover:!1,touchDrag:!1,addClassActive:!0,afterInit:function(){a("#studioFCarousel .slide").css("display","block")}}),a("#mainNav .dropdown > a").on("click",function(b){a(this).parent().hasClass("open")||(a(this).parent().addClass("open"),a(this).parent().children("div").stop().slideDown(150))}),a("a[href='#more']").click(function(a){a.preventDefault()});var r;a("#mainNav .dropdown > a").on("mouseenter",function(){var b=a(this);r=setTimeout(function(){b.parent().siblings().hasClass("open")&&b.parent().siblings().removeClass("open").children("div").stop().slideUp(150),a("#cartSummary").hasClass("open")&&(a("#cartSummary").removeClass("open"),a("#cartSummary").stop().slideUp(150)),b.parent().hasClass("open")||(b.parent().addClass("open"),b.parent().children("div").stop().slideDown(150))},100)});a("#mainNav .dropdown").on("mouseleave",function(){if(clearTimeout(r),a(this).hasClass("open")){var b=a(this);t=setTimeout(function(){b.removeClass("open"),b.children("div").stop().slideUp(150)},500)}});var t;a("#mainNav .topLevel").on("mouseleave",function(){if(a("#mainNav .dropdown").hasClass("open")){var b=a("#mainNav .dropdown");t=setTimeout(function(){b.removeClass("open"),b.children("div").stop().slideUp(150)},500)}}),a("#mainNav .dropdown").on("mouseenter",function(){clearTimeout(t)});var u=function(){a("#mainNav .dropdown").hasClass("open")&&a("#mainNav .dropdown").removeClass("open").children("div").stop().slideUp(150),a("#cartSummary").hasClass("open")?(a("#cartSummary").removeClass("open"),a("#cartSummary").stop().slideUp(150)):(a("#cartSummary").addClass("open"),a("#cartSummary").stop().slideDown(150))};document.URL.toLowerCase().indexOf("/shoppingcart")<0&&a("#desktop-cart").on("click",function(a){a.preventDefault(),u()}),a("#desktop-cart .close").on("click",function(a){a.preventDefault(),u()}),c.on("click",function(b){var c=a(b.target);c.is("#mainNav .dropdown *, #cartSummary *, #desktop-cart, #desktop-cart *")||(a("#mainNav .dropdown").siblings().hasClass("open")&&a("#mainNav .dropdown").siblings().removeClass("open").children("div").stop().slideUp(150),a("#accountOriginal").hasClass("open")&&a("#accountOriginal").removeClass("open").children(".Panel").stop().slideUp(150),a("#cartSummary").hasClass("open")&&(a("#cartSummary").removeClass("open"),a("#cartSummary").stop().slideUp(150)))}),a("#accountOriginal a").on("click",function(a){a.preventDefault()}),a("#accountOriginal").on("click",function(){window.location.assign("http://www.fathead.com/order-status/")});var v=a("li.dropdown #categories > ul");v.menuAim({activate:w,deactivate:x,submenuDirection:"right"}),b.click(function(b){var c=a(b);c.children(".Panel");c.find("a.hover").removeClass("hover"),c.removeClass("hover")}),b.on("keyup",function(b){27===b.keyCode&&(a("#mainNav .dropdown").siblings().hasClass("open")&&a("#mainNav .dropdown").siblings().removeClass("open").children("div").stop().slideUp(150),a("#accountOriginal").hasClass("open")&&a("#accountOriginal").removeClass("open").children(".Panel").stop().slideUp(150),a("#cartSummary").hasClass("open")&&(a("#cartSummary").removeClass("open"),a("#cartSummary").stop().slideUp(150)))}),a("#global-message #closeGlobalMessage").click(function(){a("#global-message").slideUp()})})});